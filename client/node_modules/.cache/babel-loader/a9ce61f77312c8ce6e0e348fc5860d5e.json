{"ast":null,"code":"import _defineProperty from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _classCallCheck from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Link}from'react-router-dom';import swal from'sweetalert';import axios from'axios';import'./style.css';var AddNewStoreProduct=/*#__PURE__*/function(_Component){_inherits(AddNewStoreProduct,_Component);function AddNewStoreProduct(props){var _this;_classCallCheck(this,AddNewStoreProduct);_this=_possibleConstructorReturn(this,_getPrototypeOf(AddNewStoreProduct).call(this,props));_this.handleSubmit=function _callee(event){var store_id,product_id,store_name,product_price,product_qty,product_img_url,product_comment,inventory_insert_response;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();store_id=_this.state.store_id;product_id=_this.state.product_id;store_name=_this.state.store_name;product_price=_this.state.product_price;product_qty=_this.state.product_qty;product_img_url=_this.state.product_img_url;product_comment=_this.state.product_comment;inventory_insert_response='';if(product_id===''){swal(\"Oops!\",\"Product Name is a required field.\",\"error\");}else if(product_price===''){swal(\"Oops!\",\"Product Price is a required field.\",\"error\");}else if(_this.isValidFloat(product_price)===false){swal(\"Oops!\",\"Enter a Valid Product Price. Example: 0.00\",\"error\");}else if(product_qty===''){swal(\"Oops!\",\"Product Qty is a required field.\",\"error\");}else if(product_img_url===''){swal(\"Oops!\",\"Product Image URL is a required field.\",\"error\");}if(!(product_id!==''&&product_price!==''&&_this.isValidFloat(product_price)===true&&product_qty!=='')){_context.next=22;break;}_context.prev=11;_context.next=14;return _regeneratorRuntime.awrap(axios.post(\"/api/inventory\",{product_id:product_id,store_id:store_id,quantity:product_qty,local_price:product_price,comment:product_comment},{headers:{'Accept':'application/json'}}));case 14:inventory_insert_response=_context.sent;if(inventory_insert_response.status===200){swal(\"Success!\",\"A new product has been added to store \".concat(store_name,\"!\"),\"info\").then(function(value){window.location.href=\"/stores/products/\".concat(store_id);});}_context.next=22;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](11);console.log(_context.t0);swal(\"Oops!\",\"Something went wrong adding this product to inventory.\",\"error\");case 22:case\"end\":return _context.stop();}}},null,null,[[11,18]]);};_this.state={all_products:[],current_inventory:[],store_name:'',store_id:'',product_id:'',product_name:'',product_price:'',product_qty:100,product_comment:''};_this.handleInputChange=_this.handleInputChange.bind(_assertThisInitialized(_this));_this.handleSelectChange=_this.handleSelectChange.bind(_assertThisInitialized(_this));_this.isValidFloat=_this.isValidFloat.bind(_assertThisInitialized(_this));return _this;}_createClass(AddNewStoreProduct,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var store_name=this.props.match.params.store_name;var store_id=this.props.match.params.store_id;this.setState({store_name:store_name,store_id:store_id});axios.get('/api/products').then(function(response){_this2.setState({all_products:response.data});}).catch(function(e){console.log(e);});axios.get('/api/inventory').then(function(response){_this2.setState({current_inventory:response.data});}).catch(function(e){console.log(e);});}},{key:\"handleInputChange\",value:function handleInputChange(e){var _this3=this;var value=e.target.value;var name=e.target.name;this.setState(function(prevState){return _objectSpread({},prevState,_defineProperty({},name,value));},function(){return console.log(_this3.state);});}},{key:\"handleSelectChange\",value:function handleSelectChange(e){var _this4=this;var value=e.target.value;var name=e.target.name;this.setState(function(prevState){return _objectSpread({},prevState,_defineProperty({},name,value));},function(){return console.log(_this4.state);});}},{key:\"isValidFloat\",value:function isValidFloat(num){var regex=/^\\d*\\.?\\d*$/;if(regex.test(num)){return true;}return false;}},{key:\"get_prods_not_in_store\",value:function get_prods_not_in_store(){var _this5=this;// this function makes a list of product ids that are not part of the current store in question\nvar inventory=this.state.current_inventory.filter(function(line){return parseInt(line.store_id)===parseInt(_this5.state.store_id);})// return list of all prods belonging to this store_id\n.map(function(entry){return entry.product_id;});// return list of list with all revelant prod ids\nvar products=this.state.all_products.map(function(entry){return entry.id;});var list_of_products_not_in_store=[];// for every product id, look for that (product id [associated to] store id) and if associacion exist, don't add to final list\nfor(var prod in products){if(!inventory.includes(products[prod])){list_of_products_not_in_store.push(products[prod]);}}return list_of_products_not_in_store;}},{key:\"render\",value:function render(){var _this6=this;// make a list of all the product_ids not associated to this store\nvar list_of_products_not_in_store=this.get_prods_not_in_store();// make a dropdown Menu with all of the products available products from the Products DB (BUT NOT YET ASSOCIATED TO THIS STORE)\nvar select_products=this.state.all_products.filter(function(product){return list_of_products_not_in_store.includes(product.id);}).map(function(prod){return React.createElement(\"option\",{key:prod.id,value:prod.id},prod.product_name);});return React.createElement(\"div\",{className:\"wrapper\"},React.createElement(\"form\",{className:\"container-fluid\",encType:\"multipart/form-data\"},React.createElement(\"h2\",{className:\"header\"},\"Add New Product to Store from Global Inventory\"),React.createElement(\"h3\",null,\"Store Name: \",this.state.store_name),React.createElement(\"div\",{className:\"add_row\"},React.createElement(\"label\",null,\"Product Name (*): \"),React.createElement(\"select\",{onChange:function onChange(e){return _this6.handleSelectChange(e);},name:\"product_id\",className:\"form-control\",id:\"product_id\",required:true},React.createElement(\"option\",{value:\"\"},\"-- Select --\"),select_products)),React.createElement(\"div\",{className:\"add_row\"},React.createElement(\"label\",null,\"Local Product Price (*):\"),React.createElement(\"input\",{type:\"text\",id:\"product_price\",className:\"form-control\",name:\"product_price\",onChange:function onChange(e){return _this6.handleInputChange(e);},value:this.state.product_price,required:true})),React.createElement(\"div\",{className:\"add_row\"},React.createElement(\"label\",null,\"Initial product qty at this store (*):\"),React.createElement(\"input\",{type:\"text\",id:\"product_qty\",className:\"form-control\",name:\"product_qty\",onChange:function onChange(e){return _this6.handleInputChange(e);},value:this.state.product_qty,required:true})),React.createElement(\"div\",{className:\"add_row\"},React.createElement(\"label\",null,\"Product comments (optional):\"),React.createElement(\"input\",{type:\"text\",id:\"product_comment\",className:\"form-control\",name:\"product_comment\",onChange:function onChange(e){return _this6.handleInputChange(e);},value:this.state.product_comment})),React.createElement(\"div\",{className:\"add_store_action_btn_block\"},React.createElement(\"button\",{onClick:this.handleSubmit,className:\"btn btn-outline-primary action_btn\"},\"Submit\"),React.createElement(Link,{to:\"/stores/products/\".concat(this.state.store_id)},React.createElement(\"button\",{className:\"btn btn-outline-danger action_btn\"},\"Cancel\")))));}}]);return AddNewStoreProduct;}(Component);export default AddNewStoreProduct;","map":{"version":3,"sources":["/home/centos/InventorySystem/client/src/containers/AddProductToStore/index.js"],"names":["React","Component","Link","swal","axios","AddNewStoreProduct","props","handleSubmit","event","preventDefault","store_id","state","product_id","store_name","product_price","product_qty","product_img_url","product_comment","inventory_insert_response","isValidFloat","post","quantity","local_price","comment","headers","status","then","value","window","location","href","console","log","all_products","current_inventory","product_name","handleInputChange","bind","handleSelectChange","match","params","setState","get","response","data","catch","e","target","name","prevState","num","regex","test","inventory","filter","line","parseInt","map","entry","products","id","list_of_products_not_in_store","prod","includes","push","get_prods_not_in_store","select_products","product"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport swal from 'sweetalert';\nimport axios from 'axios';\nimport './style.css';\n\nclass AddNewStoreProduct extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            all_products: [],\n            current_inventory: [],\n            store_name: '',\n            store_id: '',\n            product_id: '',\n            product_name: '',\n            product_price: '',\n            product_qty: 100,\n            product_comment: ''\n        }\n        this.handleInputChange = this.handleInputChange.bind(this);\n        this.handleSelectChange = this.handleSelectChange.bind(this);\n        this.isValidFloat = this.isValidFloat.bind(this);\n    }\n\n    componentDidMount() {\n        const { store_name } = this.props.match.params;\n        const { store_id } = this.props.match.params;\n        this.setState({ store_name: store_name, store_id: store_id })\n\n        axios.get('/api/products')\n            .then(response => {\n                this.setState({ all_products: response.data });\n            })\n            .catch(e => {\n                console.log(e);\n            });\n\n        axios.get('/api/inventory')\n            .then(response => {\n                this.setState({ current_inventory: response.data });\n            })\n            .catch(e => {\n                console.log(e);\n            });\n    }\n\n    handleInputChange(e) {\n        let value = e.target.value;\n        let name = e.target.name;\n        this.setState(prevState => ({\n            ...prevState, [name]: value\n\n        }), () => console.log(this.state))\n    }\n\n    handleSelectChange(e) {\n        let value = e.target.value;\n        let name = e.target.name;\n        this.setState(prevState => ({\n            ...prevState, [name]: value\n\n        }), () => console.log(this.state))\n    }\n\n    isValidFloat(num) {\n        let regex = /^\\d*\\.?\\d*$/;\n        if (regex.test(num)) {\n            return true;\n        }\n        return false;\n    }\n\n    handleSubmit = async event => {\n        event.preventDefault();\n\n        let store_id = this.state.store_id;\n        let product_id = this.state.product_id;\n        let store_name = this.state.store_name;\n        let product_price = this.state.product_price;\n        let product_qty = this.state.product_qty;\n        let product_img_url = this.state.product_img_url;\n        let product_comment = this.state.product_comment;\n\n        let inventory_insert_response = '';\n\n        if (product_id === '') {\n            swal(\"Oops!\", \"Product Name is a required field.\", \"error\");\n        } else if (product_price === '') {\n            swal(\"Oops!\", \"Product Price is a required field.\", \"error\");\n        } else if (this.isValidFloat(product_price) === false) {\n            swal(\"Oops!\", \"Enter a Valid Product Price. Example: 0.00\", \"error\");\n        } else if (product_qty === '') {\n            swal(\"Oops!\", \"Product Qty is a required field.\", \"error\");\n        } else if (product_img_url === '') {\n            swal(\"Oops!\", \"Product Image URL is a required field.\", \"error\");\n        }\n\n        if (product_id !== '' && product_price !== '' && this.isValidFloat(product_price) === true && product_qty !== '') {\n            try {\n                // add the new product to the inventory table and associate it to the store\n                inventory_insert_response = await axios.post(`/api/inventory`, { product_id: product_id, store_id: store_id, quantity: product_qty, local_price: product_price, comment: product_comment }, { headers: { 'Accept': 'application/json' } });\n\n                if (inventory_insert_response.status === 200) {\n                    swal(\"Success!\", `A new product has been added to store ${store_name}!`, \"info\")\n                        .then((value) => {\n                            window.location.href = `/stores/products/${store_id}`\n                        })\n                }\n            } catch (e) {\n                console.log(e);\n                swal(\"Oops!\", \"Something went wrong adding this product to inventory.\", \"error\");\n            }\n        }\n    }\n\n    get_prods_not_in_store() {\n        // this function makes a list of product ids that are not part of the current store in question\n        let inventory = this.state.current_inventory\n        .filter(line => parseInt(line.store_id) === parseInt(this.state.store_id)) // return list of all prods belonging to this store_id\n        .map(entry => entry.product_id); // return list of list with all revelant prod ids\n\n        let products = this.state.all_products.map(entry => entry.id);\n        \n        let list_of_products_not_in_store = [];\n\n        // for every product id, look for that (product id [associated to] store id) and if associacion exist, don't add to final list\n        for (let prod in products) {\n            if (!inventory.includes(products[prod])){\n                list_of_products_not_in_store.push(products[prod]);\n            }\n        }\n        return list_of_products_not_in_store;\n    }\n    render() {\n\n        // make a list of all the product_ids not associated to this store\n        let list_of_products_not_in_store = this.get_prods_not_in_store();\n        \n        // make a dropdown Menu with all of the products available products from the Products DB (BUT NOT YET ASSOCIATED TO THIS STORE)\n        let select_products =\n            this.state.all_products\n            .filter( product => (list_of_products_not_in_store.includes( product.id )))\n            .map ( prod => <option key={prod.id} value={prod.id}>{prod.product_name}</option> );\n        return (\n            <div className=\"wrapper\">\n                <form className=\"container-fluid\" encType=\"multipart/form-data\">\n                    <h2 className=\"header\">Add New Product to Store from Global Inventory</h2>\n                    <h3>Store Name: {this.state.store_name}</h3>\n                    <div className=\"add_row\">\n                        <label>Product Name (*): </label>\n                        <select\n                            onChange={(e) => this.handleSelectChange(e)}\n                            name=\"product_id\"\n                            className=\"form-control\"\n                            id=\"product_id\"\n                            required\n                        >\n                            <option value=\"\">-- Select --</option>\n                            {select_products}\n                        </select>\n                    </div>\n                    <div className=\"add_row\">\n                        <label>Local Product Price (*):</label>\n                        <input\n                            type=\"text\"\n                            id=\"product_price\"\n                            className=\"form-control\"\n                            name={\"product_price\"}\n                            onChange={(e) => this.handleInputChange(e)}\n                            value={this.state.product_price}\n                            required\n                        />\n                    </div>\n                    <div className=\"add_row\">\n                        <label>Initial product qty at this store (*):</label>\n                        <input\n                            type=\"text\"\n                            id=\"product_qty\"\n                            className=\"form-control\"\n                            name={\"product_qty\"}\n                            onChange={(e) => this.handleInputChange(e)}\n                            value={this.state.product_qty}\n                            required\n                        />\n                    </div>\n                    <div className=\"add_row\">\n                        <label>Product comments (optional):</label>\n                        <input\n                            type=\"text\"\n                            id=\"product_comment\"\n                            className=\"form-control\"\n                            name=\"product_comment\"\n                            onChange={(e) => this.handleInputChange(e)}\n                            value={this.state.product_comment}\n                        />\n                    </div>\n                    <div className=\"add_store_action_btn_block\">\n                        <button onClick={this.handleSubmit} className=\"btn btn-outline-primary action_btn\">Submit</button>\n                        <Link to={`/stores/products/${this.state.store_id}`}><button className=\"btn btn-outline-danger action_btn\">Cancel</button></Link>\n                    </div>\n                </form>\n            </div>\n        )\n    }\n}\n\nexport default AddNewStoreProduct;\n\n\n\n"]},"metadata":{},"sourceType":"module"}