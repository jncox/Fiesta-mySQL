{"ast":null,"code":"import _regeneratorRuntime from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _classCallCheck from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Link}from'react-router-dom';import axios from'axios';import'./style.css';var ViewStore=/*#__PURE__*/function(_Component){_inherits(ViewStore,_Component);function ViewStore(props){var _this;_classCallCheck(this,ViewStore);_this=_possibleConstructorReturn(this,_getPrototypeOf(ViewStore).call(this,props));_this.getProducts=function _callee(){var store_id,products_res,_products_res;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:store_id=_this.props.match.params.store_id;_context.prev=1;_context.next=4;return _regeneratorRuntime.awrap(axios.get(\"/api/stores/products/\".concat(store_id)));case 4:products_res=_context.sent;if(products_res.data.length>0){_this.setState({isStoreEmpty:false,store_products:products_res.data});}_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 11:_context.prev=11;_context.next=14;return _regeneratorRuntime.awrap(axios.get(\"/api/stores/\".concat(store_id)));case 14:_products_res=_context.sent;if(_products_res.data.length>0){_this.setState({store_id:store_id,store_name:_products_res.data[0].store_name});}_context.next=21;break;case 18:_context.prev=18;_context.t1=_context[\"catch\"](11);console.log(_context.t1);case 21:case\"end\":return _context.stop();}}},null,null,[[1,8],[11,18]]);};_this.toggleState=function(){var toggleObj=_this.state.store_products.map(function(inventory){return inventory.id;});};_this.handleDelete=function(event,id){event.preventDefault();// handle the deletion of a store's product entry in the DB\naxios.delete(\"http://localhost:3001/api/inventory/\".concat(id),{headers:{'Accept':'application/json'}}).then(function(response){//remove it from store products\nvar updatedProducts=_this.state.store_products.filter(function(prod){return prod.inventory_id!==id;});_this.setState({store_products:updatedProducts});}).catch(function(e){console.log(e);});};_this.state={store_name:'',store_products:[],store_id:'',quantity:'',local_price:'',comments:'',isStoreEmpty:true};_this.getProducts=_this.getProducts.bind(_assertThisInitialized(_this));_this.handleDelete=_this.handleDelete.bind(_assertThisInitialized(_this));return _this;}_createClass(ViewStore,[{key:\"componentDidMount\",value:function componentDidMount(){return _regeneratorRuntime.async(function componentDidMount$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// this.getComments();\nthis.getProducts();case 1:case\"end\":return _context2.stop();}}},null,this);}},{key:\"render\",value:function render(){var _this2=this;var inventory=this.state.store_products.map(function(inventory){return React.createElement(\"div\",{className:\"store_row\",key:inventory.inventory_id},React.createElement(\"div\",{className:\"store_col\"},inventory.product_name),React.createElement(\"div\",{className:\"store_col\"},\"$\",inventory.local_price.toFixed(2)),React.createElement(\"div\",{className:\"store_col\"},inventory.quantity),React.createElement(\"div\",{className:\"store_col\"},inventory.comment),React.createElement(\"div\",{id:\"action_btn_block\"},React.createElement(\"div\",{id:\"add_btn_store\"},React.createElement(Link,{to:\"/inventory/\".concat(inventory.inventory_id,\"/\").concat(inventory.store_id)},React.createElement(\"button\",{className:\"btn btn-outline-primary action_btn\"},\"Update\"))),React.createElement(\"button\",{onClick:function onClick(e){return _this2.handleDelete(e,inventory.inventory_id);},type:\"submit\",className:\"btn btn-outline-danger action_btn\"},\"Delete\")));});var storeDetailsForm=React.createElement(\"form\",null,React.createElement(\"div\",{className:\"store_container\"},React.createElement(\"div\",{className:\"store_row_header\"},React.createElement(\"h3\",null,\"Name\"),React.createElement(\"h3\",null,\"Local Price\"),React.createElement(\"h3\",null,\"Local Quantity\"),React.createElement(\"h3\",null,\"Comments\"),React.createElement(\"h3\",null,\"Actions\")),inventory));return React.createElement(\"div\",{className:\"wrapper\"},React.createElement(\"h2\",{className:\"header\"},\"Store Details Page\"),React.createElement(\"h3\",null,\"Store Name: \",this.state.store_name),React.createElement(\"div\",{id:\"add_btn_store\"},React.createElement(Link,{to:\"/products/add/\".concat(this.state.store_name,\"/\").concat(this.state.store_id)},React.createElement(\"button\",{className:\"btn btn-outline-primary action_btn_store\"},\"Add New Store Product\"))),this.state.isStoreEmpty?React.createElement(\"div\",null,\"*** This store does not have any products associated. Please \",React.createElement(Link,{to:\"/products/add/\".concat(this.state.store_name,\"/\").concat(this.state.store_id)},\"add\"),\" some merchandise or \",React.createElement(Link,{to:\"/stores\"},\"return\"),\" to the stores page. *** \"):storeDetailsForm);}}]);return ViewStore;}(Component);export default ViewStore;","map":{"version":3,"sources":["/home/centos/InventorySystem/client/src/containers/ViewStoreDetails/index.js"],"names":["React","Component","Link","axios","ViewStore","props","getProducts","store_id","match","params","get","products_res","data","length","setState","isStoreEmpty","store_products","console","log","store_name","toggleState","toggleObj","state","map","inventory","id","handleDelete","event","preventDefault","delete","headers","then","response","updatedProducts","filter","prod","inventory_id","catch","e","quantity","local_price","comments","bind","product_name","toFixed","comment","storeDetailsForm"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport './style.css';\n\nclass ViewStore extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            store_name: '',\n            store_products: [],\n            store_id: '',\n            quantity: '',\n            local_price: '',\n            comments: '',\n            isStoreEmpty: true\n        }\n        this.getProducts = this.getProducts.bind(this);\n        this.handleDelete = this.handleDelete.bind(this);\n    }\n\n    async componentDidMount() {\n        // this.getComments();\n        this.getProducts();\n    }\n\n    getProducts = async () => {\n        const { store_id } = this.props.match.params;\n        try {\n            // get all the products of this store\n            const products_res = await axios.get(`/api/stores/products/${store_id}`);\n            if (products_res.data.length > 0) {\n                this.setState({ isStoreEmpty: false, store_products: products_res.data });\n            }\n        } catch (e) {\n            console.log(e);\n        }\n\n        try {\n            // get the store info for a particular store\n            const products_res = await axios.get(`/api/stores/${store_id}`);\n            if (products_res.data.length > 0) {\n                this.setState({ store_id: store_id, store_name: products_res.data[0].store_name });\n            }\n        } catch (e) {\n            console.log(e);\n        }\n    }\n\n    toggleState = () => {\n        let toggleObj = this.state.store_products.map(inventory => (inventory.id:false ))\n    }\n\n    handleDelete = (event, id) => {\n        event.preventDefault();\n\n        // handle the deletion of a store's product entry in the DB\n        axios.delete(`http://localhost:3001/api/inventory/${id}`, { headers: { 'Accept': 'application/json' } })\n            .then(response => {\n                //remove it from store products\n                let updatedProducts = this.state.store_products.filter(prod => prod.inventory_id !== id)\n                this.setState({ store_products: updatedProducts })\n            })\n            .catch(e => {\n                console.log(e);\n            });\n    }\n\n    render() {\n        let inventory =\n            this.state.store_products.map(inventory => (\n                <div className=\"store_row\" key={inventory.inventory_id}>\n                    <div className=\"store_col\">\n                        {inventory.product_name}\n                    </div>\n                    <div className=\"store_col\">\n                        ${inventory.local_price.toFixed(2)}\n                    </div>\n                    <div className=\"store_col\">\n                        {inventory.quantity}\n                    </div>\n                    <div className=\"store_col\">\n                    {inventory.comment} \n                    </div>\n                    <div id=\"action_btn_block\">\n                        <div id=\"add_btn_store\"><Link to={`/inventory/${inventory.inventory_id}/${inventory.store_id}`}><button className=\"btn btn-outline-primary action_btn\">Update</button></Link></div>\n                        <button onClick={(e) => this.handleDelete(e, inventory.inventory_id)} type=\"submit\" className=\"btn btn-outline-danger action_btn\">Delete</button>\n                    </div>\n                </div>\n            ));\n\n        let storeDetailsForm =\n            <form>\n                <div className=\"store_container\">\n                    <div className=\"store_row_header\">\n                        <h3>Name</h3>\n                        <h3>Local Price</h3>\n                        <h3>Local Quantity</h3>\n                        <h3>Comments</h3>\n                        <h3>Actions</h3>\n                    </div>\n                    {inventory}\n                </div>\n            </form>\n\n        return (\n            <div className=\"wrapper\">\n                <h2 className=\"header\">Store Details Page</h2>\n                <h3>Store Name: {this.state.store_name}</h3>\n                <div id=\"add_btn_store\"><Link to={`/products/add/${this.state.store_name}/${this.state.store_id}`}><button className=\"btn btn-outline-primary action_btn_store\">Add New Store Product</button></Link></div>\n                {this.state.isStoreEmpty ? <div>*** This store does not have any products associated. Please <Link to={`/products/add/${this.state.store_name}/${this.state.store_id}`}>add</Link> some merchandise or <Link to={`/stores`}>return</Link> to the stores page. *** </div> : storeDetailsForm}\n            </div>\n        )\n    }\n}\n\nexport default ViewStore;"]},"metadata":{},"sourceType":"module"}