{"ast":null,"code":"import _defineProperty from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _classCallCheck from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/centos/InventorySystem/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Link}from'react-router-dom';import swal from'sweetalert';import axios from'axios';import'./style.css';var UpdateInventoryProduct=/*#__PURE__*/function(_Component){_inherits(UpdateInventoryProduct,_Component);function UpdateInventoryProduct(props){var _this;_classCallCheck(this,UpdateInventoryProduct);_this=_possibleConstructorReturn(this,_getPrototypeOf(UpdateInventoryProduct).call(this,props));_this.handleSubmit=function _callee(event){var inventory_id,product_name,product_price,product_qty,product_comment,product_insert_response;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();inventory_id=_this.state.inventory_id;product_name=_this.state.product_name;product_price=_this.state.product_price;product_qty=_this.state.product_qty;product_comment=_this.state.product_comment;if(product_name===''){swal(\"Oops!\",\"Product Name is a required field.\",\"error\");}else if(product_price===''){swal(\"Oops!\",\"Product Price is a required field.\",\"error\");}else if(_this.isValidFloat(product_price)===false){swal(\"Oops!\",\"Enter a Valid Product Price. Example: 0.00\",\"error\");}else if(product_qty===''){swal(\"Oops!\",\"Product Qty is a required field.\",\"error\");}if(!(product_name!==''&&product_price!==''&&_this.isValidFloat(product_price)===true&&product_qty!=='')){_context.next=19;break;}_context.prev=8;_context.next=11;return _regeneratorRuntime.awrap(axios.put(\"/api/inventory/\".concat(inventory_id),{inventory_id:inventory_id,product_name:product_name,local_price:product_price,product_quantity:product_qty,product_comment:product_comment},{headers:{'Accept':'application/json'}}));case 11:product_insert_response=_context.sent;if(product_insert_response.status===200){swal(\"Success!\",\"The product has been updated!\",\"info\").then(function(value){window.location.href=\"/stores/products/\".concat(_this.state.store_id);});}_context.next=19;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](8);console.log(_context.t0);swal(\"Oops!\",\"Something went wrong adding this product.\",\"error\");// adding product to inventory depends on a successful product creation first\ncase 19:case\"end\":return _context.stop();}}},null,null,[[8,15]]);};_this.state={inventory_id:'',store_id:'',product_name:'',product_price:'',product_qty:'',product_comment:''};_this.handleInputChange=_this.handleInputChange.bind(_assertThisInitialized(_this));// this.handleSelectChange = this.handleSelectChange.bind(this);\n_this.isValidFloat=_this.isValidFloat.bind(_assertThisInitialized(_this));return _this;}_createClass(UpdateInventoryProduct,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;var inventory_id=this.props.match.params.inventory_id;var store_id=this.props.match.params.store_id;this.setState({inventory_id:inventory_id,store_id:store_id});axios.get(\"/api/inventory/\".concat(inventory_id)).then(function(response){console.log(response);_this2.setState({product_name:response.data[0].product_name,product_price:response.data[0].local_price,product_qty:response.data[0].quantity,product_comment:response.data[0].comment});}).catch(function(e){console.log(e);});}},{key:\"handleInputChange\",value:function handleInputChange(e){var _this3=this;var value=e.target.value;var name=e.target.name;this.setState(function(prevState){return _objectSpread({},prevState,_defineProperty({},name,value));},function(){return console.log(_this3.state);});}},{key:\"isValidFloat\",value:function isValidFloat(num){var regex=/^\\d*\\.?\\d*$/;if(regex.test(num)){return true;}return false;}},{key:\"render\",value:function render(){var _this4=this;return React.createElement(\"div\",{className:\"wrapper\"},React.createElement(\"form\",{className:\"container-fluid\",encType:\"multipart/form-data\"},React.createElement(\"h2\",{className:\"header\"},\"Update Product\"),React.createElement(\"h3\",null,\"Product Name: \",this.state.product_name),React.createElement(\"div\",{className:\"add_row\"},React.createElement(\"label\",null,\"Product Price  (*):\"),React.createElement(\"input\",{type:\"text\",id:\"product_price\",className:\"form-control\",name:\"product_price\",onChange:function onChange(e){return _this4.handleInputChange(e);},value:this.state.product_price||'0.00',required:true})),React.createElement(\"div\",{className:\"add_row\"},React.createElement(\"label\",null,\"Product Qty (*):\"),React.createElement(\"input\",{type:\"text\",id:\"product_qty\",className:\"form-control\",name:\"product_qty\",onChange:function onChange(e){return _this4.handleInputChange(e);},value:this.state.product_qty||'',required:true})),React.createElement(\"div\",{className:\"add_row\"},React.createElement(\"label\",null,\"Product Comments (optional):\"),React.createElement(\"input\",{type:\"text\",id:\"product_comment\",className:\"form-control\",name:\"product_comment\",onChange:function onChange(e){return _this4.handleInputChange(e);},value:this.state.product_comment||''})),React.createElement(\"div\",{className:\"add_store_action_btn_block\"},React.createElement(\"button\",{onClick:this.handleSubmit,className:\"btn btn-outline-primary action_btn\"},\"Submit\"),React.createElement(Link,{to:\"/stores/products/\".concat(this.state.store_id)},React.createElement(\"button\",{className:\"btn btn-outline-danger action_btn\"},\"Cancel\")))));}}]);return UpdateInventoryProduct;}(Component);export default UpdateInventoryProduct;","map":{"version":3,"sources":["/home/centos/InventorySystem/client/src/containers/UpdateInventoryProduct/index.js"],"names":["React","Component","Link","swal","axios","UpdateInventoryProduct","props","handleSubmit","event","preventDefault","inventory_id","state","product_name","product_price","product_qty","product_comment","isValidFloat","put","local_price","product_quantity","headers","product_insert_response","status","then","value","window","location","href","store_id","console","log","handleInputChange","bind","match","params","setState","get","response","data","quantity","comment","catch","e","target","name","prevState","num","regex","test"],"mappings":"g4CAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,IAAP,KAAiB,YAAjB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,aAAP,C,GAEMC,CAAAA,sB,gFACF,gCAAYC,KAAZ,CAAmB,wDACf,wFAAMA,KAAN,GADe,MAmDnBC,YAnDmB,CAmDJ,iBAAMC,KAAN,mNACXA,KAAK,CAACC,cAAN,GAEIC,YAHO,CAGQ,MAAKC,KAAL,CAAWD,YAHnB,CAIPE,YAJO,CAIQ,MAAKD,KAAL,CAAWC,YAJnB,CAKPC,aALO,CAKS,MAAKF,KAAL,CAAWE,aALpB,CAMPC,WANO,CAMO,MAAKH,KAAL,CAAWG,WANlB,CAOPC,eAPO,CAOW,MAAKJ,KAAL,CAAWI,eAPtB,CASX,GAAIH,YAAY,GAAK,EAArB,CAAyB,CACrBT,IAAI,CAAC,OAAD,CAAU,mCAAV,CAA+C,OAA/C,CAAJ,CACH,CAFD,IAEO,IAAIU,aAAa,GAAK,EAAtB,CAA0B,CAC7BV,IAAI,CAAC,OAAD,CAAU,oCAAV,CAAgD,OAAhD,CAAJ,CACH,CAFM,IAEA,IAAI,MAAKa,YAAL,CAAkBH,aAAlB,IAAqC,KAAzC,CAAgD,CACnDV,IAAI,CAAC,OAAD,CAAU,4CAAV,CAAwD,OAAxD,CAAJ,CACH,CAFM,IAEA,IAAIW,WAAW,GAAK,EAApB,CAAwB,CAC3BX,IAAI,CAAC,OAAD,CAAU,kCAAV,CAA8C,OAA9C,CAAJ,CACH,CAjBU,KAmBPS,YAAY,GAAK,EAAjB,EAAuBC,aAAa,GAAK,EAAzC,EAA+C,MAAKG,YAAL,CAAkBH,aAAlB,IAAqC,IAApF,EAA4FC,WAAW,GAAK,EAnBrG,6FAsBmCV,KAAK,CAACa,GAAN,0BAA4BP,YAA5B,EAA4C,CAAEA,YAAY,CAACA,YAAf,CAA6BE,YAAY,CAAEA,YAA3C,CAAyDM,WAAW,CAAEL,aAAtE,CAAqFM,gBAAgB,CAACL,WAAtG,CAAmHC,eAAe,CAAEA,eAApI,CAA5C,CAAmM,CAAEK,OAAO,CAAE,CAAE,SAAU,kBAAZ,CAAX,CAAnM,CAtBnC,UAsBGC,uBAtBH,eAuBH,GAAIA,uBAAuB,CAACC,MAAxB,GAAmC,GAAvC,CAA4C,CACxCnB,IAAI,CAAC,UAAD,CAAa,+BAAb,CAA8C,MAA9C,CAAJ,CACCoB,IADD,CACM,SAACC,KAAD,CAAW,CACbC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,4BAA2C,MAAKhB,KAAL,CAAWiB,QAAtD,EACH,CAHD,EAIH,CA5BE,iFA8BHC,OAAO,CAACC,GAAR,cACA3B,IAAI,CAAC,OAAD,CAAU,2CAAV,CAAuD,OAAvD,CAAJ,CAAqE;AA/BlE,kEAnDI,CAEf,MAAKQ,KAAL,CAAa,CACTD,YAAY,CAAE,EADL,CAETkB,QAAQ,CAAC,EAFA,CAGThB,YAAY,CAAE,EAHL,CAITC,aAAa,CAAE,EAJN,CAKTC,WAAW,CAAE,EALJ,CAMTC,eAAe,CAAE,EANR,CAAb,CAQA,MAAKgB,iBAAL,CAAyB,MAAKA,iBAAL,CAAuBC,IAAvB,+BAAzB,CACA;AACA,MAAKhB,YAAL,CAAoB,MAAKA,YAAL,CAAkBgB,IAAlB,+BAApB,CAZe,aAalB,C,gGAEmB,oBACRtB,CAAAA,YADQ,CACS,KAAKJ,KAAL,CAAW2B,KAAX,CAAiBC,MAD1B,CACRxB,YADQ,IAERkB,CAAAA,QAFQ,CAEK,KAAKtB,KAAL,CAAW2B,KAAX,CAAiBC,MAFtB,CAERN,QAFQ,CAGhB,KAAKO,QAAL,CAAc,CAAEzB,YAAY,CAAEA,YAAhB,CAA8BkB,QAAQ,CAAEA,QAAxC,CAAd,EAEAxB,KAAK,CAACgC,GAAN,0BAA4B1B,YAA5B,GACKa,IADL,CACU,SAAAc,QAAQ,CAAI,CACdR,OAAO,CAACC,GAAR,CAAYO,QAAZ,EACA,MAAI,CAACF,QAAL,CAAc,CACVvB,YAAY,CAAEyB,QAAQ,CAACC,IAAT,CAAc,CAAd,EAAiB1B,YADrB,CAEVC,aAAa,CAAEwB,QAAQ,CAACC,IAAT,CAAc,CAAd,EAAiBpB,WAFtB,CAGVJ,WAAW,CAAEuB,QAAQ,CAACC,IAAT,CAAc,CAAd,EAAiBC,QAHpB,CAIVxB,eAAe,CAAEsB,QAAQ,CAACC,IAAT,CAAc,CAAd,EAAiBE,OAJxB,CAAd,EAMH,CATL,EAUKC,KAVL,CAUW,SAAAC,CAAC,CAAI,CACRb,OAAO,CAACC,GAAR,CAAYY,CAAZ,EACH,CAZL,EAaH,C,4DAEiBA,C,CAAG,iBACjB,GAAIlB,CAAAA,KAAK,CAAGkB,CAAC,CAACC,MAAF,CAASnB,KAArB,CACA,GAAIoB,CAAAA,IAAI,CAAGF,CAAC,CAACC,MAAF,CAASC,IAApB,CACA,KAAKT,QAAL,CAAc,SAAAU,SAAS,0BAChBA,SADgB,oBACJD,IADI,CACGpB,KADH,IAAvB,CAEI,iBAAMK,CAAAA,OAAO,CAACC,GAAR,CAAY,MAAI,CAACnB,KAAjB,CAAN,EAFJ,EAGH,C,kDAEYmC,G,CAAK,CACd,GAAIC,CAAAA,KAAK,CAAG,aAAZ,CACA,GAAIA,KAAK,CAACC,IAAN,CAAWF,GAAX,CAAJ,CAAqB,CACjB,MAAO,KAAP,CACH,CACD,MAAO,MAAP,CACH,C,uCAsCQ,iBACL,MACI,4BAAK,SAAS,CAAC,SAAf,EACI,4BAAM,SAAS,CAAC,iBAAhB,CAAkC,OAAO,CAAC,qBAA1C,EACI,0BAAI,SAAS,CAAC,QAAd,mBADJ,CAEI,+CAAmB,KAAKnC,KAAL,CAAWC,YAA9B,CAFJ,CAGI,2BAAK,SAAS,CAAC,SAAf,EACI,uDADJ,CAEI,6BACI,IAAI,CAAC,MADT,CAEI,EAAE,CAAC,eAFP,CAGI,SAAS,CAAC,cAHd,CAII,IAAI,CAAE,eAJV,CAKI,QAAQ,CAAE,kBAAC8B,CAAD,QAAO,CAAA,MAAI,CAACX,iBAAL,CAAuBW,CAAvB,CAAP,EALd,CAMI,KAAK,CAAE,KAAK/B,KAAL,CAAWE,aAAX,EAA4B,MANvC,CAOI,QAAQ,KAPZ,EAFJ,CAHJ,CAeI,2BAAK,SAAS,CAAC,SAAf,EACI,oDADJ,CAEI,6BACI,IAAI,CAAC,MADT,CAEI,EAAE,CAAC,aAFP,CAGI,SAAS,CAAC,cAHd,CAII,IAAI,CAAE,aAJV,CAKI,QAAQ,CAAE,kBAAC6B,CAAD,QAAO,CAAA,MAAI,CAACX,iBAAL,CAAuBW,CAAvB,CAAP,EALd,CAMI,KAAK,CAAE,KAAK/B,KAAL,CAAWG,WAAX,EAA0B,EANrC,CAOI,QAAQ,KAPZ,EAFJ,CAfJ,CA2BI,2BAAK,SAAS,CAAC,SAAf,EACI,gEADJ,CAEI,6BACI,IAAI,CAAC,MADT,CAEI,EAAE,CAAC,iBAFP,CAGI,SAAS,CAAC,cAHd,CAII,IAAI,CAAC,iBAJT,CAKI,QAAQ,CAAE,kBAAC4B,CAAD,QAAO,CAAA,MAAI,CAACX,iBAAL,CAAuBW,CAAvB,CAAP,EALd,CAMI,KAAK,CAAE,KAAK/B,KAAL,CAAWI,eAAX,EAA8B,EANzC,EAFJ,CA3BJ,CAsCI,2BAAK,SAAS,CAAC,4BAAf,EACI,8BAAQ,OAAO,CAAE,KAAKR,YAAtB,CAAoC,SAAS,CAAC,oCAA9C,WADJ,CAEI,oBAAC,IAAD,EAAM,EAAE,4BAAsB,KAAKI,KAAL,CAAWiB,QAAjC,CAAR,EAAqD,8BAAQ,SAAS,CAAC,mCAAlB,WAArD,CAFJ,CAtCJ,CADJ,CADJ,CA+CH,C,oCAxIgC3B,S,EA2IrC,cAAeI,CAAAA,sBAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport swal from 'sweetalert';\nimport axios from 'axios';\nimport './style.css';\n\nclass UpdateInventoryProduct extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            inventory_id: '',\n            store_id:'',\n            product_name: '',\n            product_price: '',\n            product_qty: '',\n            product_comment: ''\n        }\n        this.handleInputChange = this.handleInputChange.bind(this);\n        // this.handleSelectChange = this.handleSelectChange.bind(this);\n        this.isValidFloat = this.isValidFloat.bind(this);\n    }\n\n    componentDidMount() {\n        const { inventory_id } = this.props.match.params;\n        const { store_id } = this.props.match.params;\n        this.setState({ inventory_id: inventory_id, store_id: store_id });\n\n        axios.get(`/api/inventory/${inventory_id}`)\n            .then(response => {\n                console.log(response)\n                this.setState({\n                    product_name: response.data[0].product_name,\n                    product_price: response.data[0].local_price,\n                    product_qty: response.data[0].quantity,\n                    product_comment: response.data[0].comment\n                });\n            })\n            .catch(e => {\n                console.log(e);\n            });\n    }\n\n    handleInputChange(e) {\n        let value = e.target.value;\n        let name = e.target.name;\n        this.setState(prevState => ({\n            ...prevState, [name]: value\n        }), () => console.log(this.state))\n    }\n\n    isValidFloat(num) {\n        let regex = /^\\d*\\.?\\d*$/;\n        if (regex.test(num)) {\n            return true;\n        }\n        return false;\n    }\n\n    handleSubmit = async event => {\n        event.preventDefault();\n\n        let inventory_id = this.state.inventory_id;\n        let product_name = this.state.product_name;\n        let product_price = this.state.product_price;\n        let product_qty = this.state.product_qty;\n        let product_comment = this.state.product_comment;\n\n        if (product_name === '') {\n            swal(\"Oops!\", \"Product Name is a required field.\", \"error\");\n        } else if (product_price === '') {\n            swal(\"Oops!\", \"Product Price is a required field.\", \"error\");\n        } else if (this.isValidFloat(product_price) === false) {\n            swal(\"Oops!\", \"Enter a Valid Product Price. Example: 0.00\", \"error\");\n        } else if (product_qty === '') {\n            swal(\"Oops!\", \"Product Qty is a required field.\", \"error\");\n        }\n\n        if (product_name !== '' && product_price !== '' && this.isValidFloat(product_price) === true && product_qty !== '') {\n            try {\n                // update the product \n                const product_insert_response = await axios.put(`/api/inventory/${inventory_id}`, { inventory_id:inventory_id, product_name: product_name, local_price: product_price, product_quantity:product_qty, product_comment: product_comment }, { headers: { 'Accept': 'application/json' } });\n                if (product_insert_response.status === 200) {\n                    swal(\"Success!\", \"The product has been updated!\", \"info\")\n                    .then((value) => {\n                        window.location.href = `/stores/products/${this.state.store_id}`\n                    })\n                }\n            } catch (e) {\n                console.log(e);\n                swal(\"Oops!\", \"Something went wrong adding this product.\", \"error\"); // adding product to inventory depends on a successful product creation first\n            }\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"wrapper\">\n                <form className=\"container-fluid\" encType=\"multipart/form-data\">\n                    <h2 className=\"header\">Update Product</h2>\n                    <h3>Product Name: {this.state.product_name}</h3>\n                    <div className=\"add_row\">\n                        <label>Product Price  (*):</label>\n                        <input\n                            type=\"text\"\n                            id=\"product_price\"\n                            className=\"form-control\"\n                            name={\"product_price\"}\n                            onChange={(e) => this.handleInputChange(e)}\n                            value={this.state.product_price || '0.00'}\n                            required\n                        />\n                    </div>\n                    <div className=\"add_row\">\n                        <label>Product Qty (*):</label>\n                        <input\n                            type=\"text\"\n                            id=\"product_qty\"\n                            className=\"form-control\"\n                            name={\"product_qty\"}\n                            onChange={(e) => this.handleInputChange(e)}\n                            value={this.state.product_qty || ''}\n                            required\n                        />\n                    </div>\n                    <div className=\"add_row\">\n                        <label>Product Comments (optional):</label>\n                        <input\n                            type=\"text\"\n                            id=\"product_comment\"\n                            className=\"form-control\"\n                            name=\"product_comment\"\n                            onChange={(e) => this.handleInputChange(e)}\n                            value={this.state.product_comment || ''}\n                        />\n                    </div>\n                    <div className=\"add_store_action_btn_block\">\n                        <button onClick={this.handleSubmit} className=\"btn btn-outline-primary action_btn\">Submit</button>\n                        <Link to={`/stores/products/${this.state.store_id}`}><button className=\"btn btn-outline-danger action_btn\">Cancel</button></Link>\n                    </div>\n                </form>\n            </div>\n        )\n    }\n}\n\nexport default UpdateInventoryProduct;\n\n\n\n"]},"metadata":{},"sourceType":"module"}